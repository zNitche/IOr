{% extends "content_page.html" %}

{% set details_items = [{
"title": i18n('file_preview_page.name'),
"content": file.name,
"on_edit": "toggleElementVisibility('edit_file_name_modal', true)"
},
{
"title": i18n('file_preview_page.extension'),
"content": file.extension
},
{
"title": i18n('file_preview_page.directory'),
"content": "/" if not file.directory else file.directory.name,
"on_content_click": url_for('storage.directories.preview', uuid=file.directory.uuid) if file.directory else "",
"on_edit": "toggleElementVisibility('edit_file_directory_modal', true)"
},
{
"title": i18n('file_preview_page.size'),
"content": file.size|formatted_file_size
},
{
"title": i18n('file_preview_page.uuid'),
"content": file.uuid
},
{
"title": i18n('file_preview_page.upload_date'),
"content": file.upload_date.strftime('%d-%m-%Y %H:%M:%S')
},
{
"title": i18n('file_preview_page.sha256sum'),
"content": file.sha256_sum
}] %}

{% block head_links %}
{{super()}}
<link rel="stylesheet" href="{{ get_static_resource('css/pages/file_preview.css') }}">

<link rel="stylesheet" href="{{ get_static_resource('css/components/forms/form.css') }}">

<link rel="stylesheet" href="{{ get_static_resource('css/components/modals/modal_base.css') }}">
<link rel="stylesheet" href="{{ get_static_resource('css/components/modals/remove_file_modal.css') }}">
<link rel="stylesheet" href="{{ get_static_resource('css/components/modals/edit_file_directory_modal.css') }}">
<link rel="stylesheet" href="{{ get_static_resource('css/components/modals/change_storage_item_name_modal.css') }}">

<link rel="stylesheet" href="{{ get_static_resource('css/components/storage_item_details_row.css') }}">

<link rel="stylesheet" href="{{ get_static_resource('css/components/generic_select.css') }}">
{% endblock %}

{% block page_outer_content %}
{{super()}}
{% with modal_id='remove-file-modal', file_uuid=file.uuid, file_name=file.name %}
{% include "components/modals/remove_file_modal.html" %}
{% endwith %}
{% with modal_id='edit_file_directory_modal', file_uuid=file.uuid, directories=directories %}
{% include "components/modals/edit_file_directory_modal.html" %}
{% endwith %}
{% with modal_id='edit_file_name_modal', item=file, endpoint='storage.files.change_name', form=rename_file_form %}
{% include "components/modals/change_storage_item_name_modal.html" %}
{% endwith %}
{% endblock %}

{% block page_content %}
<div class="file-preview-page">
    <div class="header">
        <div class="file-header">
            <img src="{{ icon_for_file_extension(file.extension) }}" class="file-type-icon">
            {% if file.is_shared %}
            <img src="{{get_static_resource('icons/share_enabled_icon.svg')}}" class="sharing-enabled-icon" />
            {% endif %}
        </div>
        <div class="header-actions">
            <img src="{{get_static_resource('icons/trash_icon.svg')}}" class="actions-icon"
                onclick="toggleElementVisibility('remove-file-modal', true)" />
            <a href="{{url_for('storage.files.download', uuid=file.uuid)}}">
                <img src="{{get_static_resource('icons/download_icon.svg')}}" class="actions-icon" />
            </a>
        </div>
    </div>
    <div class="file-details">
        {% for item in details_items %}
        {% with item=item %}
        {% include "components/storage_item_details_row.html" %}
        {% endwith %}
        {% endfor %}
    </div>
</div>

{% endblock %}